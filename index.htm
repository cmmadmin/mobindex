<!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" lang="en-US">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
	<meta charset="UTF-8" />
	<title>Mobilization Index</title>

	<script type="text/javascript">
		document.documentElement.className = 'js';
	</script>
	<!--	/* DataTables Stuff */   -->
	<link rel="stylesheet" type="text/css" href="scripts/datatables.min.css"/>
	<script type="text/javascript" src="scripts/math.min.js"></script>
	<script type="text/javascript" src="scripts/datatables.min.js"></script>
	<script type="text/javascript" src="scripts/helper.js"></script>
<!--
		DEV NOTES:
		Required for DataTables to work:
		datatables.min.css			provides base functionality for appearance
		datatables.min.js			provides base functionality
		jquery 1.12.4 or higher		provides base functionality

		Additional Functionalities used:
		math.min.js					provides math.median(a, b, c, ...) and math.distance([x1, y1], [x2, y2])
		helper.js					custom helper for value conversions

		-->

        <script type="text/javascript" class="init">

            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    jsonobj = xhttp.responseText;
                }
            };
            xhttp.open("GET", "scripts/convertcsv.json", false);
            xhttp.send();

            var dataSet= JSON.parse(jsonobj);
            dataSet.forEach(dumpNA);



            function post(path, params, method) {
                method = method || "post"; // Set method to post by default if not specified.

                var form = document.createElement("form");
                form.setAttribute("method", method);
                form.setAttribute("action", path);

                for(var key in params) {
                    if(params.hasOwnProperty(key)) {
                        var hiddenField = document.createElement("input");
                        hiddenField.setAttribute("type", "hidden");
                        hiddenField.setAttribute("name", key);
                        hiddenField.setAttribute("value", params[key]);

                        form.appendChild(hiddenField);
                    }
                }

                document.body.appendChild(form);
                form.submit();
            }


            $(document).ready(function() {
                $('#example').DataTable( {
                    data:dataSet,
                   "scrollX": true,
					"paging": false,
                    dom: 'Bfrtip',
                    select: {style: 'multi'},
                    columns: [
                        { "data": 0, title: "&#127760" },											/* table col 0, data source = 0 "Country"  */
                        { "data": 1, title: "&#128200" },										/* table col 1, data source = 1 "Power Distance" */
                        { "data": 2, title: "&#9432" },										/* table col 2, data source = 2 "Individualism"  */
                        { "data": 3, title: "&#128170" },										/* table col 3, data source = 3 "Masculinity" */
                        { "data": 4, title: "&#x1f4d6" },								/* table col 4, data source = 4 "Uncertainty Avoidance" */
                        { "data": 5, title: "&#128198" },								/* table col 5, data source = 5 "Long Term Orientation"  */
                        { "data": 6, title: "&#128526" },											/* table col 6, data source = 6 "Indulgence" */
                        { "data": 7, title: "UPG Nation" },											/* hidden table col 7, data source = 7 */
                        { "data": 8, title: "Mob Index Nation" },									/* hidden table col 8, data source = 8 */
                        { "data": null, title: "&#37"},		/* table col 9, data source = calculated TBE, "data" column is placeholder "Average Median Cultural Distance to UPG's" */
                        { "data": null, title: "&#128591"},								/* table col 10, data source = calc from 9&10, "data" column is placeholder Religious Freedoms  */
                        { "data": 9, title: "Government Restrictions Index (GRI)" },				/* hidden table col 11, data source = 9 */
                        { "data": 10, title: "Social Hostilities Index (SHI)" },					/* hidden table col 12, data source = 10 */
                        { "data": 11, title: "&#128176" },									/* table col 13, data source = 11 "Prosperity Rank"   */
                        { "data": 12,
                            "render": $.fn.dataTable.render.number( ',', '.', 0),					/* render data formatting */
							title: "&#10014" },									/* table col 14, data source = 12 */
                        { "data": 13,
                            "render": $.fn.dataTable.render.number( ',', '.', 0),					/* render data formatting */
                            title: "&#9737" },						/* table col 15, data source = 13  "Current Sending In Country" */
                        { "data": 14,
                            "render": $.fn.dataTable.render.number( ',', '.', 0),					/* render data formatting */
                            title: "&#9992" },							/* table col 16, data source = 14 "Current Sending Abroad"  */
                        { "data": 15, title: "&#60 15 " },								/* table col 17, data source = 15 "% less than 15 years"   */
                        { "data": 16,
                            "render": $.fn.dataTable.render.number( ',', '.', 0),					/* render data formatting */
                            title: "&#9919" },								/* table col 18, data source = 16 "In Country UPG Access" */
                        { "data": 17,
                            "render": $.fn.dataTable.render.number( ',', '.', 0),					/* render data formatting */
                            title: "&#174 &#9919" }								/* table col 19, data source = 17 "Regional UPG Access" */
					],

					"columnDefs": [
						{
						    "targets": [ 7, 8, 11, 12 ],											// selects table col 7,8,11,12
							"visible": false														// hide selected columns
						},
                        {

                            "render": function ( data, type, row ) {
                                return notEmpty(row[1]) || notEmpty(row[2]) || notEmpty(row[3]) || notEmpty(row[4]) || notEmpty(row[5]) || notEmpty(row[6]) ?
                                    upgAvgMedianDiff(
                                        [   notEmpty(data[1]) ? parseFloat(data[1]) : "-" ,
                                            notEmpty(data[2]) ? parseFloat(data[2]) : "-" ,
                                            notEmpty(data[3]) ? parseFloat(data[3]) : "-" ,
                                            notEmpty(data[4]) ? parseFloat(data[4]) : "-" ,
                                            notEmpty(data[5]) ? parseFloat(data[5]) : "-" ,
                                            notEmpty(data[6]) ? parseFloat(data[6]) : "-" ],
                                        upgYes(dataSet)
                                    ) : "-";

                                //if all 6 columns are null display "No Data"

                            },
                            "targets": 9
                        },
                        {
                            // Assuming Rel Freedoms is the 10th column,
							// result is (GRI*.66667) + (SHI*.33333)
							// if data9 or data10 are not blank, return value- else return No Data
                            "render": function ( data, type, row ) {
                                return notEmpty(row[9]) && notEmpty(row[10]) ? ((row[9]*.6667)+(row[10]*.33333)).toPrecision(4) : "-";
                            },
                            "targets": 10
                        },
                        {
                            // Change display to %
                            "render": function ( data, type, row ) {
                                return notEmpty(row[15])?toPct(row[15]): "-";
                            },
                            "targets": 17
                        }

					],

                    buttons: [
                        {
                            extend: 'selected',
                            action: function ( e, dt, node, config ) {
                                var rows = dt.rows({selected: true}).data();
                                if (dt.rows( { selected: true } ).count() !== 1) {
                                    alert ('Only 1 country may be selected for this function');
								}
                                else {
                                    post('upg.php', rows );
                                }
                                },

							text: 'Compare to UPG Nations'
                        },
                        {
                            extend: 'selected',
                            action: function ( e, dt, node, config ) {
                                var rows = dt.rows( { selected: true } ).data();
                                if (dt.rows( { selected: true } ).count() !== 1) {
                                    alert ('Only 1 country may be selected for this function');
								}
                                else {
                                    post("cultures.php", rows);}
                            },
                            text: 'Compare Cultures'
                        }
                    ]

                } );

                $('#example tbody').on( 'click', 'tr', function () {
                    $(this).toggleClass('selected');
                } );

            } );

        </script>
	<!--	/* End DataTables Stuff */   -->


	<link rel='stylesheet' id='divi-style-css'  href='http://www.mobilization.org/wp-content/themes/Divi-child/style.css?ver=2.1.4' type='text/css' media='all' />
	<script type='text/javascript' src='http://www.mobilization.org/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
	<script type='text/javascript' src='http://www.mobilization.org/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
	<link type="text/css" rel="stylesheet" href="http://fast.fonts.net/cssapi/5fa6796f-6f4a-49be-9a03-dc7fd883437f.css"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<style>
		a { color: #ffb134; }
		body { color: #000000; }
		.et_pb_counter_amount, .et_pb_featured_table .et_pb_pricing_heading, .et_quote_content, .et_link_content, .et_audio_content { background-color: #626b63; }
		#main-header, #main-header .nav li ul, .et-search-form, #main-header .et_mobile_menu { background-color: #ffffff; }
		#top-header, #et-secondary-nav li ul { background-color: #dde3dc; }
		.et-search-form, .nav li ul, .et_mobile_menu, .footer-widget li:before, .et_pb_pricing li:before, blockquote { border-color: #626b63; }
		#main-footer { background-color: #2f2f2a; }
		#top-menu a { color: #000000; }
		#top-menu li.current-menu-ancestor > a, #top-menu li.current-menu-item > a, .bottom-nav li.current-menu-item > a { color: #ffb134; }
		body.et_fixed_nav.et_secondary_nav_enabled #main-header { top: 0px; }
		.et_fixed_nav.et_secondary_nav_enabled #page-container { padding-top: 62px;	}
	</style>
</head>
<body class="page-template-default page page-id-432 page-child parent-pageid-458 et_fixed_nav et_cover_background et_secondary_nav_enabled windows et_pb_pagebuilder_layout et_right_sidebar ie et_includes_sidebar">
	<div id="page-container">

			<div id="top-header" class="et_nav_text_color_dark">
			<div class="container clearfix">



			</div> <!-- .container -->
		</div> <!-- #top-header -->
	
		<header id="main-header" class="et_nav_text_color_dark">
			<div class="container clearfix">
				<a href="http://www.mobilization.org/">
					<img src="http://www.mobilization.org/wp-content/themes/Divi-child/images/cmm2.png" alt="Center for Mission Mobilization" id="logo" />
				</a>
			</div> <!-- .container -->
		</header> <!-- #main-header -->

		<div id="et-main-area">
			<div id="main-content">
				<article id="post-432" class="post-432 page type-page status-publish hentry">
					<div class="entry-content">
						<div class="et_pb_section et_pb_fullwidth_section et_section_regular" style='background-color:#ffffff;'>
							<section class="et_pb_fullwidth_header et_pb_bg_layout_light et_pb_text_align_center page_head">
								<div class="et_pb_row">

				<!--
				 Main Content location--------------------------------------------------------------------------------------------------------
				 -->

				<h1>Mobilization Index</h1>
				<p style="font-size:90%;">Country: &#127760/ Power Distance: &#128200/ Individualism: &#9432/ Masculinity: &#128170/ Uncertainity Avoidance: &#x1f4d6/ Long Term Orientation: &#128198/ Indulgence: &#128526 </p>
				<p style="font-size:90%;"> Average Median Cultural Distance to UPG's: &#37/ Religious Freedoms: &#128591/ Prosperity Rank: &#128176/  Evangelical #s: &#10014/ Current Sending In Country: &#9737</p>
				<p style="font-size:90%;">Current Sending Abroad: &#9992/ % less than 15 years: &#60 15 / In Country UPG Access: &#9919 /Regional UPG Access&#174 &#9919      </p>

				<table id="example" class="display dataTable compact" width="100%" role="grid" aria-describedby="example_info" style="width: 100%;">
				</table>

				<!--
				End Main Content location-----------------------------------------------------------------------------------------------------
				-->

								</div>
							</section>
						</div> <!-- .et_pb_section -->
						<div class="et_pb_section image_bottom section_head et_section_regular"></div>
						<div id="impact_bottom" class="et_pb_section border_vert image_bottom et_section_regular" style='background-image:url(http://www.mobilization.org/wp-content/uploads/2014/07/Addis-3.jpg);'></div>
					</div> <!-- .entry-content -->
				</article> <!-- .et_pb_post -->
			</div> <!-- #main-content -->


			<footer id="main-footer">

		
				<div id="et-footer-nav">
					<div class="container">
						<ul id="menu-footer" class="bottom-nav">
							<li id="menu-item-660" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-660"><a href="http://www.mobilization.org/about/our-story/">Our Story</a></li>
							<li id="menu-item-659" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-659"><a href="http://www.mobilization.org/about/leadership/">Leadership</a></li>
							<li id="menu-item-658" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-658"><a href="http://www.mobilization.org/about/beliefs/">Beliefs</a></li>
							<li id="menu-item-800" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-800"><a href="http://www.mobilization.org/contact/">Contact</a></li>
							<li id="menu-item-799" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-799"><a href="http://www.mobilization.org/join/">Join</a></li>
						</ul>
					</div>
				</div> <!-- #et-footer-nav -->

				<div class="container">
					<div id="footer-widgets" class="clearfix">
						<div class="footer-widget">
							<div id="nav_menu-4" class="fwidget et_pb_widget widget_nav_menu">
								<h4 class="title">Ministry Websites</h4>
								<div class="menu-ministry-websites-container">
									<ul id="menu-ministry-websites" class="menu">
										<li id="menu-item-216" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-216"><a href="http://weavefamily.org" target="_blank">weavefamily.org</a></li>
										<li id="menu-item-217" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-217"><a href="http://supportraisingsolutions.org" target="_blank">supportraisingsolutions.org</a></li>
										<li id="menu-item-218" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-218"><a href="http://campusministry.org" target="_blank">campusministry.org</a></li>
										<li id="menu-item-2076" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2076"><a href="http://cmmpress.org/">cmmpress.org</a></li>
									</ul>
								</div>
							</div> <!-- end .fwidget -->
						</div> <!-- end .footer-widget -->
						<div class="footer-widget">
							<div id="text-3" class="fwidget et_pb_widget widget_text">
								<h4 class="title">Center for Mission Mobilization</h4>
								<div class="textwidget">
									<p><span style="line-height:1.5em; display: block;">
										PO Box 3556<br />
										Fayetteville, AR 72702<br />
										<a href="mailto:info@mobilization.org">info@mobilization.org</a><br />
										800-595-4881
									</span></p>
								</div>
							</div> <!-- end .fwidget -->
						</div> <!-- end .footer-widget -->
						<div class="footer-widget last">
							<div id="text-4" class="fwidget et_pb_widget widget_text">
								<div class="textwidget">
									<p><span style="font-size:12px; line-height:1.33em; display: block;">© 2014 Center for Mission Mobilization. All rights reserved.</span></p>
									<p><span style="font-size:12px; line-height:1.33em; display: block;">The Center for Mission Mobilization is a 501c3, non-profit organization, EIN 71-0861654. Our finances are reviewed by an independent board of directors and Capin Crouse, a leader of financial accounting for non-profits and ministries.</span></p>
									<p><a href="/privacy-policy/ ">Privacy Policy</a></p>
								</div>
							</div> <!-- end .fwidget -->
						</div> <!-- end .footer-widget -->
					</div> <!-- #footer-widgets -->
				</div>	<!-- .container -->
			
			</footer> <!-- #main-footer -->
		</div> <!-- #et-main-area -->


	</div> <!-- #page-container -->
</body>
<?php exit(); ?>
</html>